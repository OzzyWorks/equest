<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>ENGLISH QUEST - HIGH SCHOOL 100</title>
  <style>
    html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; background: #000; color: #fff; font-family: sans-serif; }
    body { display: flex; flex-direction: column; box-sizing: border-box; padding: 10px; }
    #loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 100; }
    .spinner { border: 4px solid #333; border-top: 4px solid #fff; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    @keyframes shake { 0%, 100% { transform: translate(0,0); } 25% { transform: translate(-8px, 0); } 75% { transform: translate(8px, 0); } }
    .shake { animation: shake 0.2s ease-in-out 2; }
    #game-container { display: none; flex: 1; flex-direction: column; }
    #game-screen { flex: 1; display: flex; flex-direction: column; background: linear-gradient(to bottom, #4facfe 0%, #00f2fe 40%, #228b22 40%, #006400 100%); border: 4px solid #fff; border-radius: 8px; position: relative; overflow: hidden; }
    #mountain { position: absolute; top: 30%; left: 0; width: 100%; height: 15%; background: #004d00; clip-path: polygon(0% 100%, 15% 20%, 30% 70%, 50% 10%, 70% 60%, 85% 30%, 100% 100%); }
    #monster-area { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 2; }
    #monster-image { font-size: 10vh; filter: drop-shadow(4px 4px 0px rgba(0,0,0,0.5)); transition: transform 0.2s; }
    #monster-name-box { background: rgba(0,0,0,0.8); padding: 2px 12px; border: 2px solid #fff; border-radius: 4px; margin-bottom: 5px; font-weight: bold; }
    #boss-timer { display: none; position: absolute; top: 10px; right: 10px; background: #000; color: #ff4757; border: 2px solid #ff4757; padding: 5px; font-family: monospace; text-align: center; width: 70px; z-index: 10; }
    #timer-fill { height: 4px; background: #ff4757; width: 100%; margin-top: 2px; }
    #ui-area { flex: 1.5; display: flex; flex-direction: column; background: #000; border: 4px solid #fff; border-radius: 8px; margin-top: 8px; padding: 10px; z-index: 5; }
    #status { display: flex; justify-content: space-around; font-size: 0.8rem; border-bottom: 2px solid #fff; padding-bottom: 8px; margin-bottom: 5px; }
    .hp-danger { color: #ff4757; font-weight: bold; animation: blink 0.5s infinite alternate; }
    @keyframes blink { from { opacity: 1; } to { opacity: 0.3; } }
    #question { font-size: 0.9rem; text-align: center; min-height: 4em; display: flex; align-items: center; justify-content: center; padding: 0 5px; line-height: 1.3; }
    #choices { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    #choices button { padding: 15px 5px; font-size: 0.8rem; background: #000; color: #fff; border: 2px solid #fff; border-radius: 4px; cursor: pointer; }
    #heal-btn { display: none; width: 100%; margin-bottom: 10px; padding: 12px; background: #2ed573; color: #fff; border: none; border-radius: 4px; font-weight: bold; font-size: 1rem; }
    #log { font-size: 0.85rem; color: #ffff00; text-align: center; margin: 8px 0; height: 1.2em; font-weight: bold; }
    #next { width: 100%; padding: 15px; background: #fff; color: #000; font-weight: bold; border: none; display: none; font-size: 1.1rem; border-radius: 4px; cursor: pointer; }
    .correct { background: #2ecc71 !important; }
    .wrong { background: #e74c3c !important; }
  </style>
</head>
<body id="main-body">

  <div id="loading-screen">
    <div class="spinner"></div>
    <p style="margin-top: 20px; font-weight: bold;">PREPARING 100 QUESTIONS...</p>
  </div>

  <div id="game-container">
    <div id="game-screen">
      <div id="mountain"></div>
      <div id="boss-timer">TIME:<span id="time-num">10</span><div id="timer-fill"></div></div>
      <div id="monster-area">
        <div id="monster-name-box"><span id="monster-name">...</span></div>
        <div id="monster-image">üêæ</div>
        <div style="width:60%; height:10px; background:#444; border:1px solid #fff; margin-top:8px;">
          <div id="monster-hp" style="height:100%; background:#f00; width:100%; transition:width 0.2s;"></div>
        </div>
      </div>
    </div>
    <div id="ui-area">
      <div id="status">
        <div>LV: <span id="level">1</span></div>
        <div id="hp-box">HP: <span id="hp">100</span></div>
        <div>Â±ûÊÄß: <span id="p-element">üî•</span></div>
      </div>
      <div id="question"></div>
      <button id="heal-btn">üåø Ëñ¨Ëçâ„Çí‰Ωø„ÅÜ (HPÂÖ®ÂõûÂæ©)</button>
      <div id="choices"></div>
      <div id="log"></div>
      <button id="next"></button>
    </div>
  </div>

  <script>
    const masterQuestions = [
      // --- ÊñáÊ≥ï: ÊôÇÂà∂„ÉªÂÆå‰∫ÜÂΩ¢ ---
      { q: "I (  ) my homework yet.", choices: ["haven't finished", "didn't finish", "don't finish", "finished"], a: "haven't finished" },
      { q: "She (  ) for three hours when I arrived.", choices: ["had been sleeping", "has slept", "is sleeping", "sleeps"], a: "had been sleeping" },
      { q: "We (  ) each other since we were children.", choices: ["have known", "know", "knew", "are knowing"], a: "have known" },
      { q: "My father (  ) to London on business next week.", choices: ["is going", "goes", "went", "has gone"], a: "is going" },
      { q: "I (  ) TV when the phone rang.", choices: ["was watching", "watched", "am watching", "have watched"], a: "was watching" },
      // --- ‰∏çÂÆöË©û„ÉªÂãïÂêçË©û ---
      { q: "I'm looking forward to (  ) you again.", choices: ["seeing", "see", "saw", "be seen"], a: "seeing" },
      { q: "He decided (  ) a doctor.", choices: ["to become", "becoming", "become", "became"], a: "to become" },
      { q: "Would you mind (  ) the door?", choices: ["opening", "to open", "open", "opened"], a: "opening" },
      { q: "It is important (  ) English every day.", choices: ["to practice", "practicing", "practice", "practiced"], a: "to practice" },
      { q: "She is busy (  ) her report.", choices: ["writing", "to write", "write", "written"], a: "writing" },
      // --- ÂèóÂãïÊÖã ---
      { q: "This bridge (  ) ten years ago.", choices: ["was built", "built", "is built", "has built"], a: "was built" },
      { q: "The meeting will (  ) tomorrow.", choices: ["be held", "hold", "be holding", "held"], a: "be held" },
      { q: "English (  ) in many countries.", choices: ["is spoken", "speaks", "spoken", "is speaking"], a: "is spoken" },
      { q: "My bike (  ) stolen last night.", choices: ["was", "did", "is", "had"], a: "was" },
      // --- Èñ¢‰øÇ‰ª£ÂêçË©û ---
      { q: "The man (  ) is talking to her is my uncle.", choices: ["who", "which", "whom", "whose"], a: "who" },
      { q: "This is the book (  ) I read yesterday.", choices: ["which", "who", "whom", "whose"], a: "which" },
      { q: "I know a girl (  ) father is a famous singer.", choices: ["whose", "who", "which", "whom"], a: "whose" },
      { q: "He is the only student (  ) can speak French.", choices: ["that", "which", "whom", "whose"], a: "that" },
      { q: "Tokyo is the city (  ) I was born.", choices: ["where", "which", "that", "there"], a: "where" },
      // --- ‰ªÆÂÆöÊ≥ï ---
      { q: "If I (  ) a bird, I would fly to you.", choices: ["were", "am", "was", "be"], a: "were" },
      { q: "I wish I (  ) more money.", choices: ["had", "have", "will have", "has"], a: "had" },
      { q: "If it (  ) tomorrow, I will stay home.", choices: ["rains", "will rain", "rain", "rained"], a: "rains" },
      // --- Âä©ÂãïË©û ---
      { q: "You (  ) not smoke here.", choices: ["must", "can", "may", "need"], a: "must" },
      { q: "You (  ) better see a doctor.", choices: ["had", "should", "would", "did"], a: "had" },
      { q: "She (  ) be at home now.", choices: ["must", "will", "have to", "need to"], a: "must" },
      // --- ÈáçË¶ÅÁÜüË™û ---
      { q: "„Äåtake part (  )„Äç„Åß„ÄåÂèÇÂä†„Åô„Çã„Äç", choices: ["in", "on", "at", "to"], a: "in" },
      { q: "„Äåbe filled (  )„Äç„Åß„Äå„Äú„Åß„ÅÑ„Å£„Å±„ÅÑ„Åß„ÅÇ„Çã„Äç", choices: ["with", "by", "of", "for"], a: "with" },
      { q: "„Äådepend (  )„Äç„Åß„Äå„ÄúÊ¨°Á¨¨„Åß„ÅÇ„Çã„ÄÅ‰æùÂ≠ò„Åô„Çã„Äç", choices: ["on", "at", "to", "in"], a: "on" },
      { q: "„Äåbecause (  )„Äç„Åß„Äå„Äú„ÅÆ„Åü„ÇÅ„Å´ÔºàÁêÜÁî±Ôºâ„Äç", choices: ["of", "for", "to", "as"], a: "of" },
      { q: "„Äårun out (  )„Äç„Åß„Äå„Äú„Çí‰Ωø„ÅÑÊûú„Åü„Åô„Äç", choices: ["of", "off", "on", "in"], a: "of" },
      { q: "„Äåget (  )„Äç„Åß„Äå„Äú„Å´‰πó„ÇãÔºà„Éê„Çπ„Å™„Å©Ôºâ„Äç", choices: ["on", "in", "to", "at"], a: "on" },
      { q: "„Äåmake (  ) of„Äç„Åß„Äå„Äú„ÇíÂà©Áî®„Åô„Çã„Äç", choices: ["use", "used", "using", "user"], a: "use" },
      { q: "„Äåbe proud (  )„Äç„Åß„Äå„Äú„ÇíË™á„Çä„Å´ÊÄù„ÅÜ„Äç", choices: ["of", "for", "with", "by"], a: "of" },
      { q: "„Äålook after„Äç„Å®Âêå„ÅòÊÑèÂë≥„ÅØÔºü", choices: ["take care of", "look for", "look at", "take off"], a: "take care of" },
      // --- Ëã±ÂçòË™û (È´ò1„É¨„Éô„É´) ---
      { q: "„Äåenvironment„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Áí∞Â¢É", "ÊîøÂ∫ú", "ÊúüÂæÖ", "ÊîπÂñÑ"], a: "Áí∞Â¢É" },
      { q: "„Äåopportunity„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê©ü‰ºö", "Âπ≥Á≠â", "ÂçîÂäõ", "ÂèçÂØæ"], a: "Ê©ü‰ºö" },
      { q: "„Äåindividual„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÂÄã‰∫∫„ÅÆ", "ÈõÜÂõ£„ÅÆ", "‰ºùÁµ±ÁöÑ„Å™", "Ë§áÈõë„Å™"], a: "ÂÄã‰∫∫„ÅÆ" },
      { q: "„Äåexperience„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÁµåÈ®ì", "ÂÆüÈ®ì", "Ë°®Áèæ", "Ë™¨Êòé"], a: "ÁµåÈ®ì" },
      { q: "„Äånecessary„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÂøÖË¶Å„Å™", "Ê≠£Á¢∫„Å™", "ÂèØËÉΩ„Å™", "Ë≤¥Èáç„Å™"], a: "ÂøÖË¶Å„Å™" },
      { q: "„Äåattitude„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊÖãÂ∫¶", "È´òÂ∫¶", "ËÉΩÂäõ", "ÊÑüË¨ù"], a: "ÊÖãÂ∫¶" },
      { q: "„Äåimprove„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊîπÂñÑ„Åô„Çã", "Ë®ºÊòé„Åô„Çã", "Êèê‰æõ„Åô„Çã", "Ê∫ñÂÇô„Åô„Çã"], a: "ÊîπÂñÑ„Åô„Çã" },
      { q: "„Äåreduce„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê∏õ„Çâ„Åô", "ÂÜçÂà©Áî®„Åô„Çã", "ÊãíÁµ∂„Åô„Çã", "ÊÄù„ÅÑÂá∫„Åô"], a: "Ê∏õ„Çâ„Åô" },
      { q: "„Äåpollution„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê±öÊüì", "‰∫∫Âè£", "Ëß£Ê±∫", "‰∫∫Ê∞ó"], a: "Ê±öÊüì" },
      { q: "„Äåadvantage„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Âà©ÁÇπ", "ÂÜíÈô∫", "Âø†Âëä", "Âπ≥Âùá"], a: "Âà©ÁÇπ" },
      { q: "„Äåeducation„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊïôËÇ≤", "ÊÑüÊÉÖ", "ÁµåÊ∏à", "Áä∂Ê≥Å"], a: "ÊïôËÇ≤" },
      { q: "„Äågovernment„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊîøÂ∫ú", "Á§æ‰ºö", "ÊñáÂåñ", "‰∏ñÁ¥Ä"], a: "ÊîøÂ∫ú" },
      { q: "„Äåinfluence„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÂΩ±Èüø", "ËààÂë≥", "‰∏ñÁ¥Ä", "ÊÉÖÂ†±"], a: "ÂΩ±Èüø" },
      { q: "„Äåprepare„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê∫ñÂÇô„Åô„Çã", "Èò≤„Åê", "ÁîüÁî£„Åô„Çã", "Á¥ÑÊùü„Åô„Çã"], a: "Ê∫ñÂÇô„Åô„Çã" },
      { q: "„Äåbelieve„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["‰ø°„Åò„Çã", "Â±û„Åô„Çã", "ÊåØ„ÇãËàû„ÅÜ", "ËÄê„Åà„Çã"], a: "‰ø°„Åò„Çã" },
      { q: "„Äåforeign„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Â§ñÂõΩ„ÅÆ", "Â•áÂ¶ô„Å™", "‰∏çÊÖ£„Çå„Å™", "ÂÖ¨Âºè„ÅÆ"], a: "Â§ñÂõΩ„ÅÆ" },
      { q: "„Äåstandard„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê®ôÊ∫ñ", "Áä∂Ê≥Å", "ÊßãÈÄ†", "Êà¶Áï•"], a: "Ê®ôÊ∫ñ" },
      { q: "„Äåmedicine„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ëñ¨", "Êï∞Â≠¶", "Á≠ãËÇâ", "ÊñπÊ≥ï"], a: "Ëñ¨" },
      { q: "„Äådelicious„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["„Åä„ÅÑ„Åó„ÅÑ", "Âç±Èô∫„Å™", "È´ò‰æ°„Å™", "ÊúâÂêç„Å™"], a: "„Åä„ÅÑ„Åó„ÅÑ" },
      { q: "„Äåtravel„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊóÖË°å„Åô„Çã", "ÂÉç„Åè", "Êõ∏„Åè", "Ê≥≥„Åê"], a: "ÊóÖË°å„Åô„Çã" },
      { q: "„Äåsuccess„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊàêÂäü", "Â§±Êïó", "ÁêÜÁî±", "ÁõÆÁöÑ"], a: "ÊàêÂäü" },
      { q: "„Äåcomfortable„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Âø´ÈÅ©„Å™", "ÂèØËÉΩ„Å™", "Ë≤¨‰ªª„ÅÆ„ÅÇ„Çã", "Áèæ‰ª£„ÅÆ"], a: "Âø´ÈÅ©„Å™" },
      { q: "„Äådecide„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê±∫ÂÆö„Åô„Çã", "Ë™¨Êòé„Åô„Çã", "ÈÖçÈÅî„Åô„Çã", "Ë≠∞Ë´ñ„Åô„Çã"], a: "Ê±∫ÂÆö„Åô„Çã" },
      { q: "„Äåpopular„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["‰∫∫Ê∞ó„ÅÆ„ÅÇ„Çã", "Á§ºÂÑÄÊ≠£„Åó„ÅÑ", "ÂÖ¨ÁöÑ„Å™", "Âº∑Âäõ„Å™"], a: "‰∫∫Ê∞ó„ÅÆ„ÅÇ„Çã" },
      { q: "„Äåprevent„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Èò≤„Åê", "Ê∫ñÂÇô„Åô„Çã", "Â•Ω„ÇÄ", "‰øùË≠∑„Åô„Çã"], a: "Èò≤„Åê" },
      { q: "„Äåtraditional„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["‰ºùÁµ±ÁöÑ„Å™", "‰∏ÄÊôÇÁöÑ„Å™", "Áü•ÁöÑ„Å™", "ÂäπÊûúÁöÑ„Å™"], a: "‰ºùÁµ±ÁöÑ„Å™" },
      { q: "„Äåencourage„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÂãáÊ∞ó„Å•„Åë„Çã", "‰∫§Êèõ„Åô„Çã", "Ë°®Áèæ„Åô„Çã", "Ë™¨Êòé„Åô„Çã"], a: "ÂãáÊ∞ó„Å•„Åë„Çã" },
      { q: "„Äåimagine„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊÉ≥ÂÉè„Åô„Çã", "ÊãõÂæÖ„Åô„Çã", "ÁÑ°Ë¶ñ„Åô„Çã", "Âê´„ÇÅ„Çã"], a: "ÊÉ≥ÂÉè„Åô„Çã" },
      { q: "„Äåcentury„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["‰∏ñÁ¥Ä", "‰∏≠ÂøÉ", "ÂºèÂÖ∏", "Á¢∫„Åã„Åï"], a: "‰∏ñÁ¥Ä" },
      { q: "„Äånatural„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ëá™ÁÑ∂„ÅÆ", "ÂÖ®ÂõΩ„ÅÆ", "Âê¶ÂÆöÁöÑ„Å™", "ÊôÆÈÄö„ÅÆ"], a: "Ëá™ÁÑ∂„ÅÆ" },
      { q: "„Äådangerous„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Âç±Èô∫„Å™", "Êöó„ÅÑ", "Áï∞„Å™„Å£„Åü", "Âõ∞Èõ£„Å™"], a: "Âç±Èô∫„Å™" },
      { q: "„Äåcontinue„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Á∂ö„Åë„Çã", "ÈÄ£Áµ°„Åô„Çã", "Âê´„ÇÄ", "ÊØîËºÉ„Åô„Çã"], a: "Á∂ö„Åë„Çã" },
      { q: "„Äåvarious„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Êßò„ÄÖ„Å™", "Ë≤¥Èáç„Å™", "Â∑®Â§ß„Å™", "Á≠â„Åó„ÅÑ"], a: "Êßò„ÄÖ„Å™" },
      { q: "„Äåreason„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÁêÜÁî±", "ÁµêÊûú", "Â≠£ÁØÄ", "Âú∞Âüü"], a: "ÁêÜÁî±" },
      { q: "„Äålocal„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Âú∞ÂÖÉ„ÅÆ", "Ë´ñÁêÜÁöÑ„Å™", "Á∑©„ÅÑ", "‰Ωé„ÅÑ"], a: "Âú∞ÂÖÉ„ÅÆ" },
      { q: "„Äåprotect„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["‰øùË≠∑„Åô„Çã", "‰∫àÊ∏¨„Åô„Çã", "„Åµ„Çä„Çí„Åô„Çã", "Á¥ÑÊùü„Åô„Çã"], a: "‰øùË≠∑„Åô„Çã" },
      { q: "„Äådiscover„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Áô∫Ë¶ã„Åô„Çã", "Ë≠∞Ë´ñ„Åô„Çã", "Ë°®Á§∫„Åô„Çã", "Â£ä„Åô"], a: "Áô∫Ë¶ã„Åô„Çã" },
      { q: "„Äåsurprised„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["È©ö„ÅÑ„Åü", "ÈÄÄÂ±à„Åó„Åü", "ËààÂ•Æ„Åó„Åü", "Áñ≤„Çå„Åü"], a: "È©ö„ÅÑ„Åü" },
      { q: "„Äåenough„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÂçÅÂàÜ„Å™", "Á©∫„ÅÆ", "Á≠â„Åó„ÅÑ", "Á∞°Âçò„Å™"], a: "ÂçÅÂàÜ„Å™" },
      { q: "„Äåglobal„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Âú∞ÁêÉË¶èÊ®°„ÅÆ", "Ëºù„Åè", "ÂÑ™ÈõÖ„Å™", "Á¥†Êô¥„Çâ„Åó„ÅÑ"], a: "Âú∞ÁêÉË¶èÊ®°„ÅÆ" },
      { q: "„Äåfuture„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Êú™Êù•", "ÈÅéÂéª", "ÁèæÂú®", "ÈÅãÂëΩ"], a: "Êú™Êù•" },
      { q: "„Äåhealthy„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÂÅ•Â∫∑„Å™", "Èáç„ÅÑ", "È´ò„ÅÑ", "Ê≠£Áõ¥„Å™"], a: "ÂÅ•Â∫∑„Å™" },
      { q: "„Äåinformation„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊÉÖÂ†±", "ÂëΩ‰ª§", "Áî£Ê•≠", "ÊãõÂæÖ"], a: "ÊÉÖÂ†±" },
      { q: "„Äåknowledge„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Áü•Ë≠ò", "Ë¶™Âàá", "È®éÂ£´", "Èçµ"], a: "Áü•Ë≠ò" },
      { q: "„Äålanguage„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ë®ÄË™û", "Ëç∑Áâ©", "ÈÅã", "Á¨ë„ÅÑ"], a: "Ë®ÄË™û" },
      { q: "„Äåmemory„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ë®òÊÜ∂", "ÊñπÊ≥ï", "Èè°", "ÈñìÈÅï„ÅÑ"], a: "Ë®òÊÜ∂" },
      { q: "„Äåopinion„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊÑèË¶ã", "Ê©ü‰ºö", "Êìç‰Ωú", "ÂØæË±°"], a: "ÊÑèË¶ã" },
      { q: "„Äåperfect„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÂÆåÁíß„Å™", "Âπ≥Âíå„Å™", "ÂÄã‰∫∫ÁöÑ„Å™", "Áâ©ÁêÜÁöÑ„Å™"], a: "ÂÆåÁíß„Å™" },
      { q: "„Äåquality„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ë≥™", "Èáè", "ÈÄü„Åï", "ÂΩ¢"], a: "Ë≥™" },
      { q: "„Äårespect„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Â∞äÊï¨„Åô„Çã", "Ëøî‰∫ã„Åô„Çã", "Â†±Âëä„Åô„Çã", "‰∫àÁ¥Ñ„Åô„Çã"], a: "Â∞äÊï¨„Åô„Çã" },
      { q: "„Äåsituation„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Áä∂Ê≥Å", "Ëß£Ê±∫", "ÁΩ≤Âêç", "ÁßëÂ≠¶"], a: "Áä∂Ê≥Å" },
      { q: "„Äåtechnology„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÁßëÂ≠¶ÊäÄË°ì", "Ê∏©Â∫¶", "ÁêÜË´ñ", "ÊâçËÉΩ"], a: "ÁßëÂ≠¶ÊäÄË°ì" },
      { q: "„Äåunderstand„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÁêÜËß£„Åô„Çã", "‰∏ãÁ∑ö„ÄÅÂº∑Ë™ø„Åô„Çã", "Âºï„ÅçÂèó„Åë„Çã", "‰ΩøÁî®„Åô„Çã"], a: "ÁêÜËß£„Åô„Çã" },
      { q: "„Äåvolunteer„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["„Éú„É©„É≥„ÉÜ„Ç£„Ç¢", "Êö¥Âäõ", "Â£∞", "Ë™ûÂΩô"], a: "„Éú„É©„É≥„ÉÜ„Ç£„Ç¢" },
      { q: "„Äåweather„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Â§©Ê∞ó", "Ê≠¶Âô®", "ÂØå", "Èáç„Åï"], a: "Â§©Ê∞ó" },
      { q: "„Äåyesterday„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Êò®Êó•", "‰ªäÊó•", "ÊòéÊó•", "‰ªäÂ§ú"], a: "Êò®Êó•" },
      { q: "„Äåzero„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Èõ∂", "Â∏ØÂüü", "È†Ç‰∏ä", "ÂãïÁâ©Âúí"], a: "Èõ∂" },
      { q: "„Äåactivity„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê¥ªÂãï", "ËÉΩÂäõ", "‰∫ãÊïÖ", "‰ΩèÊâÄ"], a: "Ê¥ªÂãï" },
      { q: "„Äåbenefit„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Âà©Áõä", "ÊåØ„ÇãËàû„ÅÑ", "‰ø°Âøµ", "Ë™ïÁîü"], a: "Âà©Áõä" },
      { q: "„Äåculture„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊñáÂåñ", "ÁøíÊÖ£", "È°ßÂÆ¢", "„Ç´„Éº„ÉÜ„É≥"], a: "ÊñáÂåñ" },
      { q: "„Äådesign„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ë®≠Ë®à„Åô„Çã", "Âá∫Áô∫„Åô„Çã", "Á†¥Â£ä„Åô„Çã", "Áô∫Â±ï„Åï„Åõ„Çã"], a: "Ë®≠Ë®à„Åô„Çã" },
      { q: "„Äåeffort„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Âä™Âäõ", "ÂäπÊûú", "Âçµ", "ÈÅ∏Êåô"], a: "Âä™Âäõ" },
      { q: "„Äåfamous„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊúâÂêç„Å™", "ÂÆ∂Êóè„ÅÆ", "ÈÄü„ÅÑ", "„ÅäÊ∞ó„Å´ÂÖ•„Çä„ÅÆ"], a: "ÊúâÂêç„Å™" },
      { q: "„Äågeneral„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["‰∏ÄËà¨ÁöÑ„Å™", "ÂØõÂ§ß„Å™", "ÂÑ™„Åó„ÅÑ", "Êú¨Áâ©„ÅÆ"], a: "‰∏ÄËà¨ÁöÑ„Å™" },
      { q: "„Äåhistory„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê≠¥Âè≤", "Ë∂£Âë≥", "Á•ùÊó•", "ÂêçË™â"], a: "Ê≠¥Âè≤" },
      { q: "„Äåisland„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Â≥∂", "ÂÖ•„ÇäÂè£", "ÂïèÈ°å", "Ê∞∑"], a: "Â≥∂" },
      { q: "„Äåjourney„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊóÖ", "‰ªï‰∫ã", "Âñú„Å≥", "Ê≠£Áæ©"], a: "ÊóÖ" },
      { q: "„Äåkitchen„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Âè∞ÊâÄ", "Âáß", "ËÜù", "Áü•Ë≠ò"], a: "Âè∞ÊâÄ" }
    ];

    let player = { level: 1, exp: 0, hp: 100, element: "üî•", winCount: 0 };
    const elements = { "üî•": "üíß", "üíß": "üåø", "üåø": "üî•" };
    let pool = [];
    let usedPool = [];
    let currentQuestion = null;
    let currentMonster = {};
    let timerInt;
    let timeLeft = 10;
    let isBoss = false;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function init() {
      setTimeout(() => {
        pool = shuffle([...masterQuestions]);
        document.getElementById("loading-screen").style.display = "none";
        document.getElementById("game-container").style.display = "flex";
        nextBattle();
      }, 1000);
    }

    function nextBattle() {
      player.winCount++;
      isBoss = player.winCount % 5 === 0;
      const monsters = [{n:"„Çπ„É©„Ç§„É†",i:"üíß",t:"üíß"},{n:"„Éâ„É©„Ç≠„Éº",i:"ü¶á",t:"üåø"},{n:"„Ç¥„Éº„Çπ„Éà",i:"üëª",t:"üî•"}];
      const bosses = [{n:"„Çä„ÇÖ„ÅÜ„Åä„ÅÜ",i:"üê≤",t:"üî•"},{n:"„Éù„Çª„Ç§„Éâ„É≥",i:"üî±",t:"üíß"},{n:"„Ç®„É≥„Éà",i:"üå≥",t:"üåø"}];
      let m = isBoss ? bosses[Math.floor(Math.random()*bosses.length)] : monsters[Math.floor(Math.random()*monsters.length)];
      currentMonster = { ...m, maxHp: isBoss ? 200 : 60, hp: isBoss ? 200 : 60 };
      document.getElementById("monster-name").textContent = (isBoss ? "BOSS: " : "") + currentMonster.n;
      document.getElementById("monster-image").textContent = currentMonster.i;
      document.getElementById("boss-timer").style.display = isBoss ? "block" : "none";
      document.getElementById("next").style.display = "none";
      document.getElementById("log").textContent = isBoss ? "Âº∑Â§ß„Å™„Éú„Çπ„ÅåÁèæ„Çå„ÅüÔºÅ" : "„É¢„É≥„Çπ„Çø„Éº„ÅåÁèæ„Çå„ÅüÔºÅ";
      loadQuestion();
      updateDisplay();
    }

    function loadQuestion() {
      clearInterval(timerInt);
      if (pool.length === 0) {
        pool = shuffle([...usedPool]);
        usedPool = [];
      }
      currentQuestion = pool.pop();
      document.getElementById("question").textContent = currentQuestion.q;
      const choicesEl = document.getElementById("choices");
      choicesEl.innerHTML = "";
      shuffle([...currentQuestion.choices]).forEach(c => {
        const btn = document.createElement("button");
        btn.textContent = c;
        btn.onclick = () => checkAnswer(c, currentQuestion.a, btn);
        choicesEl.appendChild(btn);
      });
      if (isBoss) startBossTimer();
    }

    function startBossTimer() {
      timeLeft = 10;
      updateTimerUI();
      timerInt = setInterval(() => {
        timeLeft -= 0.1;
        updateTimerUI();
        if (timeLeft <= 0) {
          clearInterval(timerInt);
          pool.unshift(currentQuestion);
          handleDamage(10, "ÊôÇÈñìÂàá„ÇåÔºÅ10„ÉÄ„É°„Éº„Ç∏ÔºÅ");
          setTimeout(loadQuestion, 800);
        }
      }, 100);
    }

    function updateTimerUI() {
      document.getElementById("time-num").textContent = Math.ceil(timeLeft);
      document.getElementById("timer-fill").style.width = (timeLeft * 10) + "%";
    }

    function checkAnswer(choice, answer, btn) {
      clearInterval(timerInt);
      const buttons = document.querySelectorAll("#choices button");
      buttons.forEach(b => { b.disabled = true; });
      if (choice === answer) {
        btn.classList.add("correct");
        usedPool.push(currentQuestion);
        let damage = (elements[player.element] === currentMonster.t) ? 60 : 30;
        currentMonster.hp -= damage;
        document.getElementById("log").textContent = "Ê≠£Ëß£ÔºÅ ÊîªÊíÉÔºÅ";
        document.getElementById("monster-image").style.transform = "scale(1.4)";
        setTimeout(()=>document.getElementById("monster-image").style.transform="scale(1)", 150);
      } else {
        btn.classList.add("wrong");
        buttons.forEach(b => { if(b.textContent === answer) b.classList.add("correct"); });
        pool.unshift(currentQuestion);
        handleDamage(10, "‰∏çÊ≠£Ëß£ÔºÅ10„ÉÄ„É°„Éº„Ç∏ÔºÅ");
      }
      setTimeout(() => {
        if (currentMonster.hp <= 0) {
          document.getElementById("log").textContent = "ÂãùÂà©„Åó„ÅüÔºÅ";
          player.exp += isBoss ? 100 : 40;
          const nextBtn = document.getElementById("next");
          nextBtn.textContent = "‚ñ∂ Ê¨°„ÅÆ„Éê„Éà„É´„Å∏";
          nextBtn.style.display = "block";
          levelUpCheck();
        } else if (player.hp <= 0) {
          document.getElementById("log").textContent = "ÂÖ®ÊªÖ„Åó„Åü...";
          player.hp = 100; player.winCount = 0;
          const nextBtn = document.getElementById("next");
          nextBtn.textContent = "‚ñ∂ Âæ©Ê¥ª„Åô„Çã";
          nextBtn.style.display = "block";
        } else {
          loadQuestion();
        }
        updateDisplay();
      }, 1000);
    }

    function handleDamage(dmg, msg) {
      player.hp -= dmg;
      if (player.hp < 0) player.hp = 0;
      document.getElementById("log").textContent = msg;
      document.getElementById("main-body").classList.add("shake");
      setTimeout(() => document.getElementById("main-body").classList.remove("shake"), 300);
      updateDisplay();
    }

    function updateDisplay() {
      const hpEl = document.getElementById("hp");
      hpEl.textContent = player.hp;
      if (player.hp <= 30) hpEl.classList.add("hp-danger");
      else hpEl.classList.remove("hp-danger");
      document.getElementById("heal-btn").style.display = (player.hp <= 20 && player.hp > 0) ? "block" : "none";
      document.getElementById("monster-hp").style.width = (currentMonster.hp / currentMonster.maxHp * 100) + "%";
      document.getElementById("level").textContent = player.level;
      document.getElementById("p-element").textContent = player.element;
    }

    document.getElementById("heal-btn").onclick = () => {
      player.hp = 100;
      document.getElementById("log").textContent = "Ëñ¨Ëçâ„ÅßHP„ÅåÂÖ®Âø´„Åó„ÅüÔºÅ";
      updateDisplay();
    };

    function levelUpCheck() {
      if (player.exp >= 100) {
        player.level++; player.exp = 0;
        player.element = ["üî•", "üíß", "üåø"][player.level % 3];
      }
    }

    document.getElementById("next").onclick = () => { nextBattle(); };
    window.onload = init;
  </script>
</body>
</html>
