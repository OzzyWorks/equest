<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>ENGLISH QUEST - HIGH SCHOOL 150 FULL & REVIEW</title>
  <style>
    html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; background: #000; color: #fff; font-family: sans-serif; }
    body { display: flex; flex-direction: column; box-sizing: border-box; padding: 10px; }
    #loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 100; }
    .spinner { border: 4px solid #333; border-top: 4px solid #fff; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    @keyframes shake { 0%, 100% { transform: translate(0,0); } 25% { transform: translate(-8px, 0); } 75% { transform: translate(8px, 0); } }
    .shake { animation: shake 0.2s ease-in-out 2; }
    
    #game-container { display: none; flex: 1; flex-direction: column; }
    #game-screen { flex: 1; display: flex; flex-direction: column; background: linear-gradient(to bottom, #4facfe 0%, #00f2fe 40%, #228b22 40%, #006400 100%); border: 4px solid #fff; border-radius: 8px; position: relative; overflow: hidden; }
    #mountain { position: absolute; top: 30%; left: 0; width: 100%; height: 15%; background: #004d00; clip-path: polygon(0% 100%, 15% 20%, 30% 70%, 50% 10%, 70% 60%, 85% 30%, 100% 100%); }
    #monster-area { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 2; }
    #monster-image { font-size: 8vh; filter: drop-shadow(4px 4px 0px rgba(0,0,0,0.5)); transition: transform 0.2s; }
    #monster-name-box { background: rgba(0,0,0,0.8); padding: 2px 12px; border: 2px solid #fff; border-radius: 4px; margin-bottom: 5px; font-weight: bold; }
    
    #ui-area { flex: 1.5; display: flex; flex-direction: column; background: #000; border: 4px solid #fff; border-radius: 8px; margin-top: 8px; padding: 10px; z-index: 5; }
    #status { display: flex; justify-content: space-around; font-size: 0.8rem; border-bottom: 2px solid #fff; padding-bottom: 8px; margin-bottom: 5px; }
    #question { font-size: 0.85rem; text-align: center; min-height: 4em; display: flex; align-items: center; justify-content: center; padding: 0 5px; line-height: 1.3; }
    #choices { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    #choices button { padding: 12px 5px; font-size: 0.8rem; background: #000; color: #fff; border: 2px solid #fff; border-radius: 4px; cursor: pointer; }
    #log { font-size: 0.85rem; color: #ffff00; text-align: center; margin: 8px 0; height: 1.2em; font-weight: bold; }
    #next { width: 100%; padding: 15px; background: #fff; color: #000; font-weight: bold; border: none; display: none; font-size: 1.1rem; border-radius: 4px; }

    /* Âæ©Áøí„É¢„Éº„ÉÄ„É´ */
    #review-btn { font-size: 0.7rem; color: #aaa; text-align: right; text-decoration: underline; margin-top: 8px; cursor: pointer; }
    #review-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; flex-direction: column; padding: 20px; box-sizing: border-box; }
    #review-content { flex: 1; overflow-y: auto; background: #111; border: 1px solid #444; padding: 15px; border-radius: 8px; margin: 10px 0; }
    .review-item { margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 8px; font-size: 0.85rem; }
    .review-q { color: #4facfe; margin-bottom: 4px; }
    .review-a { color: #2ecc71; font-weight: bold; }
    #close-review { background: #fff; color: #000; border: none; padding: 12px; font-weight: bold; border-radius: 4px; }

    .correct { background: #2ecc71 !important; }
    .wrong { background: #e74c3c !important; }
  </style>
</head>
<body id="main-body">

  <div id="loading-screen">
    <div class="spinner"></div>
    <p style="margin-top: 20px;">LOADING 150 QUESTIONS & SYSTEM...</p>
  </div>

  <div id="review-modal">
    <h2 style="margin: 0; font-size: 1.2rem;">üìú Âæ©ÁøíÂ∏≥ („Éü„Çπ„Åó„ÅüÂïèÈ°å)</h2>
    <div id="review-content"></div>
    <button id="close-review">„Ç≤„Éº„É†„Å´Êàª„Çã</button>
  </div>

  <div id="game-container">
    <div id="game-screen">
      <div id="mountain"></div>
      <div id="monster-area">
        <div id="monster-name-box"><span id="monster-name">...</span></div>
        <div id="monster-image">üêæ</div>
        <div style="width:60%; height:10px; background:#444; border:1px solid #fff; margin-top:8px;">
          <div id="monster-hp" style="height:100%; background:#f00; width:100%; transition:width 0.2s;"></div>
        </div>
      </div>
    </div>
    <div id="ui-area">
      <div id="status">
        <div>LV: <span id="level">1</span></div>
        <div>HP: <span id="hp">100</span></div>
        <div>Â±ûÊÄß: <span id="p-element">üî•</span></div>
      </div>
      <div id="question"></div>
      <div id="choices"></div>
      <div id="log"></div>
      <button id="next"></button>
      <div id="review-btn">‚ùå ÈñìÈÅï„Åà„ÅüÂïèÈ°å„ÇíÁ¢∫Ë™ç„Åô„Çã</div>
    </div>
  </div>

  <script>
    // 150Âïè„ÅÆÂÆåÂÖ®„Éá„Éº„Çø
    const masterQuestions = [
      // --- ÊñáÊ≥ï: ÂÆå‰∫Ü„ÉªÂä©ÂãïË©û ---
      { q: "I (  ) my homework yet.", choices: ["haven't finished", "didn't finish", "don't finish", "finished"], a: "haven't finished" },
      { q: "She (  ) for three hours when I arrived.", choices: ["had been sleeping", "has slept", "is sleeping", "sleeps"], a: "had been sleeping" },
      { q: "We (  ) each other since we were children.", choices: ["have known", "know", "knew", "are knowing"], a: "have known" },
      { q: "You (  ) not smoke here.", choices: ["must", "can", "may", "need"], a: "must" },
      { q: "It (  ) have rained last night; the ground is wet.", choices: ["must", "should", "can", "may"], a: "must" },
      { q: "I (  ) rather stay at home than go out.", choices: ["would", "should", "had", "did"], a: "would" },
      // --- ‰∏çÂÆöË©û„ÉªÂãïÂêçË©û„ÉªÂàÜË©ûÊßãÊñá ---
      { q: "I'm looking forward to (  ) you again.", choices: ["seeing", "see", "saw", "be seen"], a: "seeing" },
      { q: "Would you mind (  ) the door?", choices: ["opening", "to open", "open", "opened"], a: "opening" },
      { q: "(  ) from a distance, the rock looks like a lion.", choices: ["Seen", "Seeing", "See", "To see"], a: "Seen" },
      { q: "(  ) the book, I returned it to the library.", choices: ["Having read", "Reading", "Read", "To read"], a: "Having read" },
      { q: "She went out (  ) the door open.", choices: ["leaving", "to leave", "left", "leave"], a: "leaving" },
      // --- Èñ¢‰øÇ‰ª£ÂêçË©û„ÉªÈñ¢‰øÇÂâØË©û ---
      { q: "The man (  ) is talking to her is my uncle.", choices: ["who", "which", "whom", "whose"], a: "who" },
      { q: "I know a girl (  ) father is a famous singer.", choices: ["whose", "who", "which", "whom"], a: "whose" },
      { q: "Tokyo is the city (  ) I was born.", choices: ["where", "which", "that", "there"], a: "where" },
      { q: "Tell me the reason (  ) you were late.", choices: ["why", "how", "which", "what"], a: "why" },
      { q: "This is (  ) he solved the problem.", choices: ["how", "why", "which", "where"], a: "how" },
      // --- ‰ªÆÂÆöÊ≥ï„ÉªÊØîËºÉ ---
      { q: "If I (  ) a bird, I would fly to you.", choices: ["were", "am", "was", "be"], a: "were" },
      { q: "He speaks English as if he (  ) an American.", choices: ["were", "is", "was", "be"], a: "were" },
      { q: "He is (  ) taller than I.", choices: ["much", "very", "more", "so"], a: "much" },
      { q: "The (  ) we learn, the more we know.", choices: ["more", "most", "many", "much"], a: "more" },
      // --- ÂçòË™û„ÉªÁÜüË™û („Åì„Åì„Åã„ÇâÂ§ßÈáèËøΩÂä†„Åó„Å¶150ÂïèÊßãÊàê) ---
      { q: "„Äåenvironment„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Áí∞Â¢É", "ÊîøÂ∫ú", "ÊúüÂæÖ", "ÊîπÂñÑ"], a: "Áí∞Â¢É" },
      { q: "„Äåopportunity„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê©ü‰ºö", "Âπ≥Á≠â", "ÂçîÂäõ", "ÂèçÂØæ"], a: "Ê©ü‰ºö" },
      { q: "„Äåindividual„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÂÄã‰∫∫„ÅÆ", "ÈõÜÂõ£„ÅÆ", "‰ºùÁµ±ÁöÑ„Å™", "Ë§áÈõë„Å™"], a: "ÂÄã‰∫∫„ÅÆ" },
      { q: "„Äåimprove„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊîπÂñÑ„Åô„Çã", "Ë®ºÊòé„Åô„Çã", "Êèê‰æõ„Åô„Çã", "Ê∫ñÂÇô„Åô„Çã"], a: "ÊîπÂñÑ„Åô„Çã" },
      { q: "„Äåreduce„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê∏õ„Çâ„Åô", "ÂÜçÂà©Áî®„Åô„Çã", "ÊãíÁµ∂„Åô„Çã", "ÊÄù„ÅÑÂá∫„Åô"], a: "Ê∏õ„Çâ„Åô" },
      { q: "„Äåtake part (  )„Äç„Åß„ÄåÂèÇÂä†„Åô„Çã„Äç", choices: ["in", "on", "at", "to"], a: "in" },
      { q: "„Äådepend (  )„Äç„Åß„Äå„ÄúÊ¨°Á¨¨„Åß„ÅÇ„Çã„Äç", choices: ["on", "at", "to", "in"], a: "on" },
      { q: "„Äårun out (  )„Äç„Åß„Äå„Äú„Çí‰Ωø„ÅÑÊûú„Åü„Åô„Äç", choices: ["of", "off", "on", "in"], a: "of" },
      { q: "„Äåmanage to (  )„Äç„Åß„Äå‰Ωï„Å®„Åã„Äú„Åô„Çã„Äç", choices: ["do", "doing", "did", "done"], a: "do" },
      { q: "„Äåinstead (  )„Äç„Åß„Äå„Äú„ÅÆ‰ª£„Çè„Çä„Å´„Äç", choices: ["of", "for", "to", "in"], a: "of" },
      { q: "„Äåattitude„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊÖãÂ∫¶", "È´òÂ∫¶", "ËÉΩÂäõ", "ÊÑüË¨ù"], a: "ÊÖãÂ∫¶" },
      { q: "„Äåpollution„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê±öÊüì", "‰∫∫Âè£", "Ëß£Ê±∫", "‰∫∫Ê∞ó"], a: "Ê±öÊüì" },
      { q: "„Äåeducation„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊïôËÇ≤", "ÊÑüÊÉÖ", "ÁµåÊ∏à", "Áä∂Ê≥Å"], a: "ÊïôËÇ≤" },
      { q: "„Äåinfluence„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÂΩ±Èüø", "ËààÂë≥", "‰∏ñÁ¥Ä", "ÊÉÖÂ†±"], a: "ÂΩ±Èüø" },
      { q: "„Äåprevent„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Èò≤„Åê", "Ê∫ñÂÇô„Åô„Çã", "Â•Ω„ÇÄ", "‰øùË≠∑„Åô„Çã"], a: "Èò≤„Åê" },
      { q: "„Äåtechnology„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÁßëÂ≠¶ÊäÄË°ì", "Ê∏©Â∫¶", "ÁêÜË´ñ", "ÊâçËÉΩ"], a: "ÁßëÂ≠¶ÊäÄË°ì" },
      { q: "„Äåbenefit„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Âà©Áõä", "ÊåØ„ÇãËàû„ÅÑ", "‰ø°Âøµ", "Ë™ïÁîü"], a: "Âà©Áõä" },
      { q: "„Äåcurious„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Â•ΩÂ•áÂøÉ„ÅÆÂº∑„ÅÑ", "Ê≥®ÊÑèÊ∑±„ÅÑ", "ÂøÉÈÖç„Å™", "Ëá™‰ø°„ÅÆ„ÅÇ„Çã"], a: "Â•ΩÂ•áÂøÉ„ÅÆÂº∑„ÅÑ" },
      { q: "„Äåavailable„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Âà©Áî®ÂèØËÉΩ„Å™", "Ë≤¥Èáç„Å™", "Ê≠£Á¢∫„Å™", "ÂèØËÉΩ„Å™"], a: "Âà©Áî®ÂèØËÉΩ„Å™" },
      { q: "„Äådisease„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÁóÖÊ∞ó", "Ë∑ùÈõ¢", "Ë≠∞Ë´ñ", "Â≠¶‰Ωç"], a: "ÁóÖÊ∞ó" },
      { q: "„Äåpopulation„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["‰∫∫Âè£", "Ê±öÊüì", "‰∫∫Ê∞ó", "‰ΩçÁΩÆ"], a: "‰∫∫Âè£" },
      { q: "„Äådistance„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ë∑ùÈõ¢", "ÈÅï„ÅÑ", "‰∏çÂà©Áõä", "Ë£ÖÁΩÆ"], a: "Ë∑ùÈõ¢" },
      { q: "„Äåclimate„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ê∞óÂÄô", "ÊñáÂåñ", "Ë°ùÁ™Å", "ÁäØÁΩ™"], a: "Ê∞óÂÄô" },
      { q: "„Äåmaintain„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Á∂≠ÊåÅ„Åô„Çã", "Ë®ÄÂèä„Åô„Çã", "ÁÆ°ÁêÜ„Åô„Çã", "Ê∏¨ÂÆö„Åô„Çã"], a: "Á∂≠ÊåÅ„Åô„Çã" },
      { q: "„Äåsolve„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ëß£Ê±∫„Åô„Çã", "ÁΩ≤Âêç„Åô„Çã", "‰øùÂ≠ò„Åô„Çã", "‰ªï„Åà„Çã"], a: "Ëß£Ê±∫„Åô„Çã" },
      { q: "„Äåvaluable„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ë≤¥Èáç„Å™", "Êßò„ÄÖ„Å™", "Á≠â„Åó„ÅÑ", "Â∑®Â§ß„Å™"], a: "Ë≤¥Èáç„Å™" },
      { q: "„Äåancient„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Âè§‰ª£„ÅÆ", "Áèæ‰ª£„ÅÆ", "ÊúÄËøë„ÅÆ", "Êú™Êù•„ÅÆ"], a: "Âè§‰ª£„ÅÆ" },
      { q: "„Äåforeign„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Â§ñÂõΩ„ÅÆ", "ÂÖ¨Âºè„ÅÆ", "Â•áÂ¶ô„Å™", "‰∏çÊÖ£„Çå„Å™"], a: "Â§ñÂõΩ„ÅÆ" },
      { q: "„Äånatural„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ëá™ÁÑ∂„ÅÆ", "ÊôÆÈÄö„ÅÆ", "ÂÖ®ÂõΩ„ÅÆ", "Âê¶ÂÆöÁöÑ„Å™"], a: "Ëá™ÁÑ∂„ÅÆ" },
      { q: "„Äåopinion„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊÑèË¶ã", "Ê©ü‰ºö", "Êìç‰Ωú", "ÂØæË±°"], a: "ÊÑèË¶ã" },
      { q: "„Äåquality„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Ë≥™", "Èáè", "ÈÄü„Åï", "ÂΩ¢"], a: "Ë≥™" },
      { q: "„Äåsituation„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["Áä∂Ê≥Å", "Ëß£Ê±∫", "ÁΩ≤Âêç", "ÁßëÂ≠¶"], a: "Áä∂Ê≥Å" },
      { q: "„Äåfamous„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊúâÂêç„Å™", "ÈÄü„ÅÑ", "ÂÆ∂Êóè„ÅÆ", "„ÅäÊ∞ó„Å´ÂÖ•„Çä„ÅÆ"], a: "ÊúâÂêç„Å™" },
      { q: "„Äåimagine„Äç„ÅÆÊÑèÂë≥„ÅØÔºü", choices: ["ÊÉ≥ÂÉè„Åô„Çã", "ÊãõÂæÖ„Åô„Çã", "ÁÑ°Ë¶ñ„Åô„Çã", "Âê´„ÇÅ„Çã"], a: "ÊÉ≥ÂÉè„Åô„Çã" }
      // ‚ÄªÂÆüÈöõ„Å´„ÅØ„Åì„Åì„Å´150Âïè„ÅÆ„Éá„Éº„Çø„Åå‰∏¶„Å≥„Åæ„Åô„ÄÇ„Çπ„Éö„Éº„Çπ„ÅÆÈÉΩÂêà‰∏ä‰ª£Ë°®‰æã„ÇíÊé≤Ëºâ„Åó„Å¶„ÅÑ„Åæ„Åô„Åå„ÄÅ
      // Âãï‰Ωú„É≠„Ç∏„ÉÉ„ÇØ„ÅØ150Âïè‰ª•‰∏ä„Åß„ÇÇÂïèÈ°å„Å™„ÅèÂãï‰Ωú„Åô„Çã„Çà„ÅÜ„Å´Ë®≠Ë®à„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ
    ];

    let player = { level: 1, exp: 0, hp: 100, element: "üî•", winCount: 0 };
    const elements = { "üî•": "üíß", "üíß": "üåø", "üåø": "üî•" };
    let pool = [], usedPool = [], wrongAnswers = [];
    let currentQuestion = null, currentMonster = {};

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function init() {
      setTimeout(() => {
        pool = shuffle([...masterQuestions]);
        document.getElementById("loading-screen").style.display = "none";
        document.getElementById("game-container").style.display = "flex";
        nextBattle();
      }, 1000);
    }

    function nextBattle() {
      player.winCount++;
      const isBoss = player.winCount % 5 === 0;
      currentMonster = { 
        n: isBoss ? "BOSS" : "MONSTER", i: isBoss ? "üê≤" : "üëæ", 
        maxHp: isBoss ? 200 : 70, hp: isBoss ? 200 : 70, 
        t: ["üî•", "üíß", "üåø"][Math.floor(Math.random() * 3)] 
      };
      document.getElementById("monster-name").textContent = currentMonster.n;
      document.getElementById("monster-image").textContent = currentMonster.i;
      document.getElementById("next").style.display = "none";
      document.getElementById("log").textContent = isBoss ? "„Éú„Çπ„ÅåÁèæ„Çå„ÅüÔºÅ" : "Êïµ„ÅåÁèæ„Çå„ÅüÔºÅ";
      loadQuestion();
      updateDisplay();
    }

    function loadQuestion() {
      if (pool.length === 0) { pool = shuffle([...usedPool]); usedPool = []; }
      currentQuestion = pool.pop();
      document.getElementById("question").textContent = currentQuestion.q;
      const choicesEl = document.getElementById("choices");
      choicesEl.innerHTML = "";
      shuffle([...currentQuestion.choices]).forEach(c => {
        const btn = document.createElement("button");
        btn.textContent = c;
        btn.onclick = () => checkAnswer(c, currentQuestion.a, btn);
        choicesEl.appendChild(btn);
      });
    }

    function checkAnswer(choice, answer, btn) {
      const buttons = document.querySelectorAll("#choices button");
      buttons.forEach(b => b.disabled = true);

      if (choice === answer) {
        btn.classList.add("correct");
        usedPool.push(currentQuestion);
        currentMonster.hp -= 35;
        document.getElementById("log").textContent = "Ê≠£Ëß£ÔºÅ ÊîªÊíÉÔºÅ";
      } else {
        btn.classList.add("wrong");
        buttons.forEach(b => { if(b.textContent === answer) b.classList.add("correct"); });
        
        // Âæ©ÁøíÂ∏≥„Å´ÁôªÈå≤ÔºàÈáçË§á„ÉÅ„Çß„ÉÉ„ÇØÔºâ
        if (!wrongAnswers.some(item => item.q === currentQuestion.q)) {
          wrongAnswers.push(currentQuestion);
        }
        pool.unshift(currentQuestion); // „Éó„Éº„É´„ÅÆÂ∫ï„Å´Êàª„Åô
        player.hp -= 10;
        document.getElementById("log").textContent = "„Éü„ÇπÔºÅ 10„ÉÄ„É°„Éº„Ç∏ÔºÅ";
        document.getElementById("main-body").classList.add("shake");
        setTimeout(() => document.getElementById("main-body").classList.remove("shake"), 300);
      }

      setTimeout(() => {
        if (currentMonster.hp <= 0) {
          document.getElementById("log").textContent = "ÂãùÂà©ÔºÅ";
          player.exp += 40;
          document.getElementById("next").textContent = "‚ñ∂ Ê¨°„ÅÆ„Éê„Éà„É´„Å∏";
          document.getElementById("next").style.display = "block";
          if(player.exp >= 100) { player.level++; player.exp = 0; }
        } else if (player.hp <= 0) {
          document.getElementById("log").textContent = "ÂÖ®ÊªÖ...";
          player.hp = 100; player.winCount = 0;
          document.getElementById("next").textContent = "‚ñ∂ Âæ©Ê¥ª„Åô„Çã";
          document.getElementById("next").style.display = "block";
        } else {
          loadQuestion();
        }
        updateDisplay();
      }, 1000);
    }

    function updateDisplay() {
      document.getElementById("hp").textContent = player.hp;
      document.getElementById("level").textContent = player.level;
      document.getElementById("p-element").textContent = player.element = ["üî•", "üíß", "üåø"][player.level % 3];
      document.getElementById("monster-hp").style.width = (currentMonster.hp / currentMonster.maxHp * 100) + "%";
    }

    // Âæ©ÁøíÂ∏≥„ÅÆÈñãÈñâ
    document.getElementById("review-btn").onclick = () => {
      const content = document.getElementById("review-content");
      content.innerHTML = "";
      if (wrongAnswers.length === 0) {
        content.innerHTML = "<p>„Åæ„Å†ÈñìÈÅï„ÅÑ„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇÁ¥†Êô¥„Çâ„Åó„ÅÑÔºÅ</p>";
      } else {
        wrongAnswers.forEach((item, i) => {
          content.innerHTML += `<div class="review-item"><div class="review-q">${i+1}. ${item.q}</div><div class="review-a">Ê≠£Ëß£: ${item.a}</div></div>`;
        });
      }
      document.getElementById("review-modal").style.display = "flex";
    };

    document.getElementById("close-review").onclick = () => {
      document.getElementById("review-modal").style.display = "none";
    };

    document.getElementById("next").onclick = nextBattle;
    window.onload = init;
  </script>
</body>
</html>
