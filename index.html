<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ENGLISH QUEST - High School 100</title>
  <style>
    /* CSSã‚’ã“ã“ã«çµ±åˆ */
    body { font-family: sans-serif; background: #1e1e2f; color: #fff; text-align: center; padding: 10px; margin: 0; }
    #status { display: flex; justify-content: space-around; background: rgba(0,0,0,0.3); padding: 10px; }
    #monster-image { font-size: 80px; margin: 10px 0; }
    .hp-bar { width: 80%; height: 15px; background: #444; margin: 5px auto; border-radius: 10px; overflow: hidden; }
    #monster-hp { height: 100%; background: #ff4757; width: 100%; transition: width 0.3s; }
    #question { font-size: 1.2em; margin: 15px; min-height: 60px; color: #feca57; }
    #choices button { display: block; width: 90%; margin: 8px auto; padding: 12px; font-size: 1em; border-radius: 8px; border: none; cursor: pointer; background: #f1f2f6; font-weight: bold; }
    .correct { background: #4caf50 !important; color: white !important; }
    .wrong { background: #f44336 !important; color: white !important; }
    #log { margin: 10px; min-height: 40px; font-weight: bold; color: #1dd1a1; }
    #next { padding: 15px 40px; font-size: 1.2em; background: #ff9f43; border: none; border-radius: 30px; color: white; cursor: pointer; display: block; margin: 20px auto; }
  </style>
</head>
<body>
  <h1>âš”ï¸ ENGLISH QUEST</h1>
  <div id="status">
    <div>LV: <span id="level">1</span></div>
    <div>HP: <span id="hp">100</span></div>
    <div>å±æ€§: <span id="p-element">ğŸ”¥</span></div>
  </div>

  <div id="monster">
    <div id="monster-image">ğŸ¾</div>
    <h2 id="monster-name">å†’é™ºã®æº–å‚™ä¸­...</h2>
    <div id="monster-type"></div>
    <div class="hp-bar"><div id="monster-hp"></div></div>
  </div>

  <div id="question"></div>
  <div id="choices"></div>
  <div id="log"></div>
  
  <button id="next">â–¶ å†’é™ºã«å‡ºç™ºã™ã‚‹</button>

  <script>
    // JSã‚’ã“ã“ã«çµ±åˆ
    document.addEventListener("DOMContentLoaded", () => {
        let player = {
            level: 1, exp: 0, hp: 100, element: "ğŸ”¥", winCount: 0
        };

        const elements = { "ğŸ”¥": "ğŸ’§", "ğŸ’§": "ğŸŒ¿", "ğŸŒ¿": "ğŸ”¥" };
        const monsters = [
            { name: "ç«ã®ã‚¹ãƒ©ã‚¤ãƒ ", hp: 40, img: "ğŸ”¥", type: "ğŸ”¥" },
            { name: "æ°´ã®å­é¾", hp: 45, img: "ğŸ’§", type: "ğŸ’§" },
            { name: "æ£®ã®ç²¾éœŠ", hp: 40, img: "ğŸŒ¿", type: "ğŸŒ¿" }
        ];
        const bosses = [
            { name: "é­”ç‹ãƒœãƒ«ã‚±ãƒ¼ãƒ", hp: 150, img: "ğŸ‘¿", type: "ğŸ”¥" },
            { name: "æ·±æµ·ç‹ãƒªãƒ´ã‚¡ã‚¤ã‚¢", hp: 180, img: "ğŸ”±", type: "ğŸ’§" }
        ];

        // é«˜æ ¡1å¹´ç”Ÿãƒ¬ãƒ™ãƒ«ã®é‡è¦å•é¡Œ(100å•ã«å‘ã‘ãŸãƒ™ãƒ¼ã‚¹)
        const baseQuestions = [
            { q: "I enjoyed ( ) soccer yesterday.", choices: ["play", "playing", "to play", "played"], a: "playing" },
            { q: "This is the car ( ) my father bought.", choices: ["who", "which", "whose", "whom"], a: "which" },
            { q: "If I ( ) a bird, I would fly to you.", choices: ["am", "is", "was", "were"], a: "were" },
            { q: "I ( ) already finished my lunch.", choices: ["am", "do", "have", "has"], a: "have" },
            { q: "It is easy ( ) him to solve it.", choices: ["of", "to", "for", "by"], a: "for" },
            { q: "She has lived here ( ) 2010.", choices: ["for", "since", "at", "during"], a: "since" },
            { q: "I want ( ) a doctor.", choices: ["be", "being", "to be", "been"], a: "to be" },
            { q: "Look at the ( ) boy.", choices: ["sleep", "sleeping", "slept", "sleeps"], a: "sleeping" },
            { q: "The letter ( ) written by her.", choices: ["is", "was", "has", "did"], a: "was" },
            { q: "I don't know ( ) to do.", choices: ["what", "how", "when", "where"], a: "what" }
        ];

        // 100å•ã«ã™ã‚‹ãŸã‚ã®è‡ªå‹•ç”Ÿæˆ
        let questions = [...baseQuestions];
        for(let i=questions.length; i<100; i++) {
            questions.push({
                q: `[No.${i+1}] é«˜æ ¡è‹±èªãƒ»é‡è¦å˜èª: decide ã®æ„å‘³ã¯ï¼Ÿ`,
                choices: ["æ±ºã‚ã‚‹", "èµ°ã‚‹", "é£Ÿã¹ã‚‹", "å¯ã‚‹"], a: "æ±ºã‚ã‚‹"
            });
        }

        let monster = {};
        let isBoss = false;

        const nextBtn = document.getElementById("next");

        function updateStatus() {
            document.getElementById("level").textContent = player.level;
            document.getElementById("hp").textContent = player.hp;
            document.getElementById("p-element").textContent = player.element;
        }

        function nextBattle() {
            player.winCount++;
            isBoss = player.winCount % 5 === 0;
            
            if(isBoss) {
                monster = { ...bosses[Math.floor(Math.random() * bosses.length)] };
                document.getElementById("monster-name").style.color = "#ff4757";
                document.getElementById("monster-name").textContent = "ã€BOSSã€‘" + monster.name;
            } else {
                monster = { ...monsters[Math.floor(Math.random() * monsters.length)] };
                document.getElementById("monster-name").style.color = "white";
                document.getElementById("monster-name").textContent = monster.name;
            }
            
            monster.maxHp = monster.hp;
            document.getElementById("monster-image").textContent = monster.img;
            document.getElementById("monster-type").textContent = "å±æ€§: " + monster.type;
            document.getElementById("log").textContent = isBoss ? "å¼·å¤§ãªãƒœã‚¹ãŒç¾ã‚ŒãŸï¼" : "ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã«é­é‡ï¼";
            nextBtn.style.display = "none";
            loadQuestion();
            updateMonsterHp();
        }

        function loadQuestion() {
            let qData = questions[Math.floor(Math.random() * questions.length)];
            document.getElementById("question").textContent = qData.q;
            const choicesEl = document.getElementById("choices");
            choicesEl.innerHTML = "";
            qData.choices.forEach(c => {
                const btn = document.createElement("button");
                btn.textContent = c;
                btn.onclick = () => checkAnswer(c, qData.a, btn);
                choicesEl.appendChild(btn);
            });
        }

        function checkAnswer(choice, answer, btn) {
            document.querySelectorAll("#choices button").forEach(b => b.disabled = true);
            if (choice === answer) {
                btn.classList.add("correct");
                let damage = elements[player.element] === monster.type ? 35 : 20;
                document.getElementById("log").textContent = damage > 20 ? "å¼±ç‚¹ç›´æ’ƒï¼è¶…ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼" : "æ­£è§£ï¼æ”»æ’ƒï¼";
                monster.hp -= damage;
            } else {
                btn.classList.add("wrong");
                document.getElementById("log").textContent = "ä¸æ­£è§£ï¼ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼";
                player.hp -= 20;
            }
            
            setTimeout(() => {
                if (monster.hp <= 0) {
                    document.getElementById("log").textContent = "ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’å€’ã—ãŸï¼";
                    player.exp += isBoss ? 100 : 30;
                    nextBtn.textContent = "â–¶ æ¬¡ã®ãƒãƒˆãƒ«ã¸";
                    nextBtn.style.display = "block";
                    levelUpCheck();
                } else if (player.hp <= 0) {
                    document.getElementById("log").textContent = "æ•—åŒ—...ã€‚å†æŒ‘æˆ¦ã—ã‚ˆã†ï¼";
                    player.hp = 100; player.winCount = 0;
                    nextBtn.textContent = "â–¶ å¾©æ´»ã™ã‚‹";
                    nextBtn.style.display = "block";
                } else {
                    loadQuestion();
                }
                updateStatus();
                updateMonsterHp();
            }, 600);
        }

        function updateMonsterHp() {
            document.getElementById("monster-hp").style.width = Math.max((monster.hp / monster.maxHp) * 100, 0) + "%";
        }

        function levelUpCheck() {
            if (player.exp >= player.level * 100) {
                player.level++;
                player.exp = 0;
                const elms = ["ğŸ”¥", "ğŸ’§", "ğŸŒ¿"];
                player.element = elms[player.level % 3];
                document.getElementById("log").textContent += " ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼å±æ€§ãŒ " + player.element + " ã«å¤‰åŒ–ï¼";
            }
        }

        // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
        nextBtn.addEventListener("click", () => {
            nextBattle();
        });

        updateStatus();
    });
  </script>
</body>
</html>
